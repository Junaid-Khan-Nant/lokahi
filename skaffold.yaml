apiVersion: skaffold/v2beta28
kind: Config
metadata:
  name: horizon-stream
build:
  artifacts:
  - image: opennms/horizon-stream-core
    custom:
      buildCommand: ./skaffold-build.sh
      dependencies:
        paths: ["platform/**"]
        ignore: ["**/target/**"]

portForward:
  - resourceType: deployment
    resourceName: my-horizon-stream
    port: 8181
    localPort: 18181
  - resourceType: deployment
    resourceName: my-horizon-stream
    port: 8101
    localPort: 18101
  - resourceType: deployment
    resourceName: my-horizon-stream
    port: 5005
    localPort: 15005
  - resourceType: deployment
    resourceName: my-keycloak
    port: 8080
    localPort: 28080

deploy:
  kubectl:
    manifests:
    - local-docker-compose/kubernetes.kafka.yaml
